var Alert={first:true,add:function(a){if(Alert.first||$("#overlaymessage").css("display")=="none"){Alert.first=false;Alert.element=$("<div class='overlaymessage' id='overlaymessage' style='display:none;'></div><div class='boxmessage' id='boxmessage'><a class='boxmessageclose' id='boxclose'></a><p>"+a+"</p></div>");$("body").prepend(Alert.element);$("#overlaymessage").fadeIn("fast",function(){$("#boxmessage").animate({top:"160px"},500)});setTimeout(function(){$("#boxmessage").animate({top:"-200px"},500,function(){$("#overlaymessage").fadeOut("fast")})},5000)}},remove:function(){Alert.element.hide()},destroy:function(){Alert.element.remove()}};var Browser={go:function(a){location.href=a}};var Clock={element:$("#clock"),timer:null,add:function(){if(Clock.element.length==0){Clock.element=$('<div id="clock" class="color"><span id="hour">00</span><img src="templates/default/img/colon.gif"><span id="minutes">00</span></div>');$("body").prepend(Clock.element)}if(Clock.timer==null){Clock.timer=window.setInterval(Clock.refresh,500)}Clock.element.show()},remove:function(){Clock.element.hide();window.clearInterval(Clock.timer);Clock.timer=null},refresh:function(){var b=new Date();var a=b.getHours();var c=b.getMinutes();a=(a<10?"0":"")+a;c=(c<10?"0":"")+c;Clock.element.find("#hour").html(a);Clock.element.find("#minutes").html(c)},destroy:function(){Clock.element.empty();Clock.element.remove();window.clearInterval(Clock.timer);Clock.timer=null}};$(document).ready(function(){Clock.add()});var Magnify={timer:null,turtle:function(d,c){if(c==undefined){c=10000}var a=$(".turtle#"+d);if(a.length!=0){var b=a.parent();Switcher.to(d);Magnify.group(b.attr("data-group"),c)}},group:function(c,b){if(b==undefined){b=10000}var a=$('.group[data-group="'+c+'"]');if(a.length!=0){$(".group").each(function(){if($(this)[0]!=a[0]){$(this).animate({width:"0%"})}});a.animate({width:"100%"},400,function(){a.addClass("magnified").find(".turtle").addClass("magnified").trigger("resize")})}if(b!=0){clearTimeout(Magnify.timer);Magnify.timer=setTimeout(Magnify.reset,b)}},reset:function(){$(".group").removeClass("magnified").each(function(){$(this).animate({width:$(this).attr("data-width")+"%"},400,function(){$(this).removeClass("magnified").find(".turtle").trigger("resize")})})}};var Message={element:$("#message"),timer:null,add:function(c,b){if(b==undefined){b=30000}if(Message.element.length==0){Message.element=$('<div id="message"><span class="color"></span></div>').hide();$("body").prepend(Message.element)}var a=Message.element.find("span");a.html(c);Message.element.fadeIn();a.css("margin-top","-"+(a.height()/2)+"px");if(b!=0){clearTimeout(Message.timer);Message.timer=setTimeout(Message.remove,b)}},remove:function(){Message.element.fadeOut()},destroy:function(){Message.element.remove()}};var Overlay={element:$("#overlay"),timer:null,add:function(a,b){if(b==undefined){b=30000}if(Overlay.element.length==0){Overlay.element=$('<div id="overlay"></div>');$("body").prepend(Overlay.element)}Overlay.element.css("background-image","url("+a+")");Overlay.element.fadeIn();if(b!=0){clearTimeout(Overlay.timer);Overlay.timer=setTimeout(Overlay.remove,b)}},remove:function(){Overlay.element.fadeOut()},destroy:function(){Overlay.element.remove()}};var Pincode={element:$("#pincode"),add:function(a){if(Pincode.element.length==0){Pincode.element=$('<div id="pincode" class="color"></div>');Pincode.element.insertAfter("#clock")}Pincode.element.text(a);Pincode.element.show()},remove:function(){Pincode.element.hide()},destroy:function(){Pincode.element.empty();Pincode.element.remove()}};var Switcher={root:$("#main"),interval:false,timer:null,rotate:function(){$(".group").each(function(){var c=$(this).find(".turtle").size();if(c==1){$(this).find(".turtle").first().addClass("active")}else{var e=$(this).find("ol");if(e.length==0){e=$("<ol>");$(this).prepend(e)}while(e.find("li").length<c){e.append("<li>")}while(e.find("li").length>c){e.last("<li>").remove()}var d=$(this).find(".turtle.active");if(d.length==0){var b=$(this).find(".turtle").first()}else{var b=d.next();if(b.length==0){b=$(this).find(".turtle").first()}}var a=$(this).find(b).index();$(this).find(".turtle").removeClass("active").hide().trigger("hide");b.addClass("active").show().trigger("show");e.find("li").removeClass("active");e.find("li").eq(a-1).addClass("active")}})},to:function(e){Switcher.stop();var c=$(".turtle#"+e);if(c.length==0){return false}var d=c.parent();var b=d.find("ol");var a=d.find(c).index();b.find("li").removeClass("active");b.find("li").eq(a-1).addClass("active");d.find(".turtle").removeClass("active").hide().trigger("hide");c.show().trigger("show");Switcher.start()},start:function(){if(!Switcher.timer){Switcher.timer=window.setInterval(Switcher.rotate,infoScreen.interval)}},stop:function(){clearInterval(Switcher.timer);Switcher.timer=false}};$(document).ready(function(){Switcher.rotate();Switcher.start()});var Twitter={element:$("#twitter"),timer:null,showTimer:null,oldTweet:"",pendingTweets:new Array(),running:false,add:function(b,a){$.getScript("http://dinbror.dk/downloads/jquery.bpopup-0.7.0.min.js",function(c,e,d){console.log(c);console.log(e);console.log(d.status);console.log("Load was performed.")});running=true;if(Twitter.timer==null){Twitter.timer=window.setInterval(function(){Twitter.refresh(b)},5000)}},remove:function(){$("#popup").bPopup().close();var a=Twitter.pendingTweets.shift();if(a!=undefined&&running){Twitter.showMessage(a)}},destroy:function(){$("#popup").bPopup().close();clearTimeout(Twitter.timer);Twitter.timer=null;running=false},refresh:function(a){$.ajax({url:"http://data.irail.be/spectql/twitter/search/"+a+"/results.limit(20):json",type:"GET",dataType:"json",success:function(d,c,k){var b;var f=d.spectql.length;var j=Twitter.oldTweet;for(var h=(d.spectql.length-1);h>=0;h--){if(d.spectql[h].id==j){f=h}}for(var e=(f-1);e>=0;e--){Twitter.pendingTweets.push(d.spectql[e])}Twitter.oldTweet=d.spectql[0].id;if(Twitter.element.css("display")!="block"){var g=Twitter.pendingTweets.shift();if(g!=undefined){Twitter.showMessage(g)}}console.log(Twitter.pendingTweets.length)},error:function(d,b,c){console.log(d.status)}})},showMessage:function(a){if(Twitter.element.length==0){Twitter.element=$('<div id="popup" display="none"><div id="content"><img style="height:100px;width:100px"></img><div id="username"></div><div id="text"></div><div class="color" style="width:100%;height:5px;margin:5px"/></div></div>').hide();$("body").prepend(Twitter.element)}Twitter.element.find("#text").html(a.text);Twitter.element.find("img").attr("src",a.profile_image_url);Twitter.element.find("#username").html(a.from_user_name);$("#popup").bPopup();clearTimeout(Twitter.showTimer);Twitter.showTimer=setTimeout(Twitter.remove,15000)}};